---
layout: post
title: es6
date: 2018-5-25
categories: javascript
tags: [es6]
description: 边学边记录。
---


### ES6
[http://es6.ruanyifeng.com/](http://es6.ruanyifeng.com/)
> Javascript 新一代标准 2015年6月正式发布 

`箭头函数`
{% highlight Perl %}
var f = () => 5;
// 等同于
var f = function () { return 5 };
{% endhighlight %}
> 如果箭头函数的代码块部分多于一条语句，就要使用大括号将它们括起来，并且使用return语句返回

{% highlight Perl %}
// 报错
let getTempItem = id => { id: id, name: "Temp" };

// 不报错
let getTempItem = id => ({ id: id, name: "Temp" });
{% endhighlight %}
> 由于大括号被解释为代码块，所以如果箭头函数直接返回一个对象，必须在对象外面加上括号，否则会报错。

---
`变量的解构赋值`
{% highlight Perl %}
function example() {
	return {
		foo: 1,
		bar: 2
	};
}
let { foo, bar } = example();
{% endhighlight %}
> 将example返回的roo,bar，赋值到对应的变量上，使用起来就会方便很多。

---
`Promise`
{% highlight Perl %}
function timeout() {
	return new Promise(function(resolve, reject) {
	    setTimeout(resolve, 2000, 'wawa');
	})
}

timeout().then(function(val) {
	console.log('haha');
	console.log(val) ;
})
{% endhighlight %}
> 将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数then方法可以接受两个回调函数作为参数。第一个回调函数是Promise对象的状态变为resolved时调用，第二个回调函数是Promise对象的状态变为rejected时调用。其中，第二个函数是可选的，不一定要提供。这两个函数都接受Promise对象传出的值作为参数。

---
`Generator 函数`
{% highlight Perl %}
function* prt() {
  yield 'hello';
  yield 'world';
  return 'ending';
}

prt.next();
prt.next();
prt.next();
{% endhighlight %}
> Generator 函数是分段执行的，yield表达式是暂停执行的标记，而next方法可以恢复执行。function关键字与函数名之间有一个星号;函数体内部使用yield表达式

---
`Class（类）`
{% highlight Perl %}
class Human {
    constructor(name, gender) {
        this.name = name;
        this.gender = gender;
    }

    toString(){
        return `name:${this.name} and gender:${this.gender}`;
    }
}

let yq = new Human('yq','man');
console.log(yq.toString());// name:yq and gender:man
{% endhighlight %}
> 定义“类”的方法的时候，前面不需要加上function这个关键字，直接把函数定义放进去了就可以了。另外，方法之间不需要逗号分隔，加了会报错

---
`模板字符串`
{% highlight Perl %}
class Human {
    constructor(name, gender) {
        this.name = name;
        this.gender = gender;
    }

    toString_1() {
        return `name:${this.name} and gender:${this.gender}`;
    }
    toString_2() {
        return "name:" + this.name + "and gender:" + this.gender;
    }
}
{% endhighlight %}
> toString_1: 传统的 JavaScript 语言
> toString_2: 模板字符串（template string）是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。


---
`Object.assign(对象的扩展)`
{% highlight Perl %}
const target = { a: 1 };

const source1 = { b: 2 };
const source2 = { c: 3 };

Object.assign(target, source1, source2);
target // {a:1, b:2, c:3}

// -----------------------------------
const target = { a: 1, b: 1 };

const source1 = { b: 2, c: 2 };
const source2 = { c: 3 };

Object.assign(target, source1, source2);
target // {a:1, b:2, c:3}
{% endhighlight %}
- Object.assign方法用于对象的合并，将源对象（source）的所有可枚举属性，复制到目标对象（target）。
- Object.assign方法的第一个参数是目标对象，后面的参数都是源对象。
- 如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。