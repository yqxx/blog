---
layout: post
title: webpack
date: 2018-5-31
categories: webpack
tags: [webpack]
description: 边学边记录。
---

### Webpack
[https://webpack.js.org/](https://webpack.js.org/) [中文翻译](https://webpack.docschina.org/)
> 代码模块化构建打包工具

`创建项目结构依赖包`
{% highlight Perl %}
npm init -y

cnpm i webpack webpack-cli webpack-dev-server html-webpack-plugin -D

mkdir src dist build
{% endhighlight %}

`项目结构`
{% highlight Perl %}
|-- webpack-02
    |-- package.json
    |-- build
    |   |-- webpack.dev.conf.js
    |-- dist
    |-- src
        |-- index.js
{% endhighlight %}

`index.js`
{% highlight Perl %}
document.write("Hello World!");
{% endhighlight %}

`webpack.dev.config.js`
{% highlight Perl %}
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: './dist/[hash]app.js',
    hashDigestLength: 8 // 默认长度是20
  },
  plugins: [new HtmlWebpackPlugin],
  devServer: {
    contentBase: path.join(__dirname, "../dist"), //网站的根目录为 根目录/dist，如果配置不对，会报Cannot GET /错误
    port: 9000, //端口改为9000
    open: true // 自动打开浏览器
  }
};
{% endhighlight %}

`package.json`
{% highlight Perl %}
{
  "name": "02",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "build": "webpack --config ./build/webpack.dev.conf.js",
    "dev": "webpack-dev-server --config ./build/webpack.dev.conf.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "html-webpack-plugin": "^3.2.0",
    "webpack": "^4.10.2",
    "webpack-cli": "^2.1.4",
    "webpack-dev-server": "^3.1.4"
  }
}

{% endhighlight %}

`项目更目录run script`
{% highlight Perl %}
npm run dev
{% endhighlight %}

![图片]({{ site.baseurl }}/img/post/webpack-01.png)

---
### webpack-dev-server
[https://github.com/webpack/webpack-dev-server](https://github.com/webpack/webpack-dev-server)
> 提供简易的WEB服务器；自动同步重载javaScript代码

`webpack.config.js`
{% highlight Perl %}
// By default it will use your current working directory to serve content, but you can modify this to another directory:
devServer: {
    contentBase: './dist'
}
{% endhighlight %}

`package.json`
{% highlight Perl %}
// add a script to easily run the dev server
"start": "webpack-dev-server --config ./build/webpack.dev.conf.js --open"
{% endhighlight %}

> 服务器打包后的文件并没有物理存在电脑上，只是在内存中
which provides fast in-memory access to the webpack assets.

---
### html-webpack-plugin
[https://github.com/jantimon/html-webpack-plugin](https://github.com/jantimon/html-webpack-plugin)
> 简化了HTML文件的创建，以便为 webpack bundle 提供服务
simplifies creation of HTML files to serve your bundles

---